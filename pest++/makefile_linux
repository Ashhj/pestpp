CXX = 'g++'
CCC = 'g++'
FC = gfortran
#CFLAGS := '-std=gnu++0x -O2 -c' 
#FFLAGS := '-O2 -c -cpp'
#CFLAGS := '-std=gnu++0x -g -gdwarf-2 -c' 
#FFLAGS := '-g -gdwarf-2 -c -cpp'
CFLAGS := '-pthread -std=c++11 -Wl,--no-as-needed -g  -c' 
#CFLAGS := '-pthread -std=c++11 -g  -c' 
FFLAGS := '-g -c -cpp'

all:
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C common -f makefile_linux libcommon.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C iopp -f makefile_linux libiopp.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C yamr -f makefile_linux librunmanager.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C propack -f makefile_linux libpropack.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C pest_routines -f makefile_linux libpest_routines.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C pestpp_common -f makefile_linux libpestpp_com.a
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C pest++ -f makefile_linux pestpp
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C morris_meth -f makefile_linux gsa.exe
	make FC=${FC} CC=${CC} CXX=${CXX} CFLAGS=${CFLAGS} FFLAGS=${FFLAGS} -C run_manager_fortran_test -f makefile_linux fortran_test
clean:
	make -C common -f makefile_linux clean
	make -C iopp -f makefile_linux clean
	make -C yamr -f makefile_linux clean
	make -C propack -f makefile_linux clean
	make -C pest_routines -f makefile_linux clean
	make -C pestpp_common -f makefile_linux clean
	make -C pest++ -f makefile_linux clean
	make -C morris_meth -f makefile_linux clean
	make -C run_manager_fortran_test -f makefile_linux clean